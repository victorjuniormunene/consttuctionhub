{% load static %}
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{% block title %}Construction Hub{% endblock %}</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="icon" href="{% static 'favicon.ico' %}">
        <style>
            @keyframes slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
            
            /* Mobile Navigation Styles */
            .hamburger {
                display: none;
                flex-direction: column;
                cursor: pointer;
                padding: 10px;
                background: transparent;
                border: none;
                z-index: 1001;
            }
            .hamburger span {
                display: block;
                width: 25px;
                height: 3px;
                background: white;
                margin: 3px 0;
                border-radius: 2px;
                transition: all 0.3s ease;
            }
            .hamburger.active span:nth-child(1) {
                transform: rotate(45deg) translate(5px, 6px);
            }
            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }
            .hamburger.active span:nth-child(3) {
                transform: rotate(-45deg) translate(5px, -6px);
            }
            
            /* Responsive Styles */
            @media (max-width: 900px) {
                .container { padding: 0 0.75rem !important; }
            }
            
            @media (max-width: 768px) {
                header { padding: 0.75rem 0; }
                header .container { 
                    flex-wrap: wrap; 
                    justify-content: space-between !important;
                }
                header .brand { flex: 1; }
                header .brand h1 { font-size: 1rem; }
                header .brand img { width: 45px; height: 45px; }
                
                .hamburger { display: flex; }
                
                nav {
                    position: fixed;
                    top: 0;
                    right: -100%;
                    width: 280px;
                    height: 100vh;
                    background: linear-gradient(180deg, #0f766e 0%, #065f46 100%);
                    padding: 80px 20px 20px;
                    transition: right 0.3s ease;
                    z-index: 1000;
                    box-shadow: -4px 0 20px rgba(0,0,0,0.3);
                    overflow-y: auto;
                }
                nav.active { right: 0; }
                nav ul {
                    flex-direction: column;
                    gap: 0.5rem;
                    align-items: flex-start;
                }
                nav ul li {
                    width: 100%;
                    border-bottom: 1px solid rgba(255,255,255,0.1);
                    padding: 0.5rem 0;
                }
                nav ul li:last-child { border-bottom: none; }
                nav a {
                    display: block;
                    padding: 0.75rem 1rem;
                    width: 100%;
                    font-size: 1rem;
                }
                nav button {
                    width: 100%;
                    text-align: left;
                    padding: 0.75rem 1rem;
                    background: transparent;
                    border: none;
                    color: rgba(255,255,255,0.95);
                    font-size: 1rem;
                    font-weight: 500;
                    cursor: pointer;
                    border-radius: 6px;
                }
                nav button:hover { background: rgba(255,255,255,0.06); }
                
                .nav-overlay {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 999;
                }
                .nav-overlay.active { display: block; }
                
                /* Footer responsive */
                footer .container { flex-direction: column; gap: 1rem; text-align: center; }
                .footer-links { justify-content: center; }
                
                /* Main content */
                main { padding: 1rem 0 !important; }
                
                /* WhatsApp icon smaller on mobile */
                .whatsapp-icon { width: 45px !important; height: 45px !important; bottom: 15px !important; right: 15px !important; }
            }
            
            @media (max-width: 480px) {
                header .brand h1 { font-size: 0.9rem; }
                header .brand img { width: 40px; height: 40px; }
                nav { width: 100%; right: -100%; }
            }
            
            /* Hide nav overlay by default */
            .nav-overlay { display: none; }
        </style>
    </head>
    <body>
        <header>
            <div class="container" style="display:flex;align-items:center;justify-content:space-between">
                <div class="brand">
                    <a href="{% url 'accounts:home' %}" style="display:flex;align-items:center;text-decoration:none;color:inherit">
                        <img src="{% static 'images/logo.jpg' %}" alt="logo" width="60" height="60" style="border-radius:12px;background:linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));padding:8px;border:2px solid rgba(255,255,255,0.2);box-shadow:0 4px 15px rgba(0,0,0,0.2);transition:all 0.3s ease;">
                        <h1 style="margin-left:10px">Construction Hub</h1>
                    </a>
                </div>
                <button class="hamburger" onclick="toggleNav()" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <nav id="mainNav">
                    <ul>
                        <li><a href="{% url 'accounts:home' %}">Home</a></li>
                        {% if user.is_authenticated and not user.is_supplier and not user.is_consultant %}
                            <li><a href="{% url 'suppliers:product_list' %}">Products</a></li>
                        {% endif %}
                        <li><a href="{% url 'accounts:pricing' %}">Pricing</a></li>
                        {% if user.is_authenticated and user.user_type == 'customer' %}
                            
                        {% endif %}
                        <li><a href="{% url 'accounts:about' %}">About</a></li>
                        <li><a href="{% url 'accounts:contact' %}">Contact</a></li>
                        {% if not user.is_authenticated or not user.is_supplier %}
                            <li><a href="{% url 'accounts:consultant_application' %}">Apply as Consultant</a></li>
                        {% endif %}
                                    {% if user.is_authenticated %}
                                        <li><a href="{% url 'accounts:dashboard' %}">Dashboard</a></li>
                                        {% if user.is_supplier %}
                                        <li><a href="{% url 'messaging:conversations' %}">Messages</a></li>
                                        {% endif %}
                                        <li>
                                            <form method="post" action="{% url 'accounts:logout' %}">
                                                {% csrf_token %}
                                                <button type="submit" class="btn" style="background:transparent;padding:0.25rem 0.5rem;border-radius:6px;color:rgba(255,255,255,0.95);border:1px solid rgba(255,255,255,0.06)">Logout</button>
                                            </form>
                                        </li>
                        {% else %}
                            <li><a href="/accounts/login/">Login</a></li>
                            <li><a href="{% url 'accounts:register' %}">Register</a></li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
        </header>
        <div class="nav-overlay" onclick="toggleNav()"></div>
        <main class="container" style="padding:1.25rem 0">
            {% if messages %}
                <div style="margin-bottom:1rem">
                    {% for m in messages %}
                        <div class="form-card" style="background:#fff7ed;border-left:4px solid #ffb020;margin-bottom:0.5rem">{{ m }}</div>
                    {% endfor %}
                </div>
            {% endif %}
            {% block content %}{% endblock %}
        </main>


        <footer style="background:transparent;padding:1.25rem 0">
            <div class="container" style="display:flex;align-items:center;justify-content:space-between">
<div class="footer-note">Â© 2024 @victorTech All Rights Reserved.</div>
                <div class="footer-links">
                    <a href="/docs/api/" style="color:var(--muted);text-decoration:none">API</a>
                    <a href="{% url 'accounts:about' %}" style="color:var(--muted);text-decoration:none">About</a>
                </div>
            </div>
        </footer>
        <!-- WhatsApp Icon -->
        <a href="https://wa.me/0112731468?text=Hi%2C%20what%20can%20I%20help%20you%20with%3F%20Start%20a%20Conversation" target="_blank" class="whatsapp-icon" style="position:fixed;bottom:20px;right:20px;z-index:1000;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" style="width:50px;height:50px;border-radius:50%;box-shadow:0 4px 8px rgba(0,0,0,0.3);">
        </a>

        <script>
            function toggleNav() {
                const nav = document.getElementById('mainNav');
                const hamburger = document.querySelector('.hamburger');
                const overlay = document.querySelector('.nav-overlay');
                nav.classList.toggle('active');
                hamburger.classList.toggle('active');
                overlay.classList.toggle('active');
            }
            
            // Close nav when clicking a link on mobile
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        toggleNav();
                    }
                });
            });
            
            // Close nav on window resize
            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) {
                    const nav = document.getElementById('mainNav');
                    const hamburger = document.querySelector('.hamburger');
                    const overlay = document.querySelector('.nav-overlay');
                    nav.classList.remove('active');
                    hamburger.classList.remove('active');
                    overlay.classList.remove('active');
                }
            });
        </script>
    </body>
</html>
